<div class="container">
    <section></section>
    <section>
        <h3>Órdenes en preparación</h3>
        <div *ngFor="let ticket of tickets">
            <app-order-card *ngIf="ticket.state === 'enPreparacion'" [showUser]="true" [markInProgressButton]="true"
                [cancellable]="true" [ticketInput]="ticket"
                (cancelOrder)="openConfirmationModal(ticket)"></app-order-card>
        </div>
    </section>
    <section>
        <h3>Órdenes en envío</h3>
        <div *ngFor="let ticket of tickets">
            <app-order-card *ngIf="ticket.state === 'enEnvio'" [showUser]="true" [markSentButton]="true"
                [cancellable]="true" [ticketInput]="ticket"
                (cancelOrder)="openConfirmationModal(ticket)"></app-order-card>
        </div>
    </section>
    <section>
        <h3>Órdenes enviadas</h3>
        <div *ngFor="let ticket of tickets">
            <app-order-card *ngIf="ticket.state === 'enviado'" [showUser]="true"
                [ticketInput]="ticket"></app-order-card>
        </div>
    </section>
    <section>
        <h3>Órdenes rechazadas</h3>
        <div *ngFor="let ticket of tickets">
            <app-order-card *ngIf="ticket.state === 'rechazado'" [showUser]="true"
                [ticketInput]="ticket"></app-order-card>
        </div>
    </section>
</div>

<!-- Modal de confirmación -->
<div *ngIf="showModal" class="modal">
    <div class="modal-dialog">
        <div class="modal-header">
            <h5 class="modal-title">Confirmar cancelación</h5>
            <button class="close" (click)="closeModal()">&times;</button>
        </div>
        <div class="modal-body">
            ¿Estás seguro de que deseas cancelar el pedido de <strong>{{ selectedTicket?.user?.name }}</strong>?
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" (click)="closeModal()">Cancelar</button>
            <button class="btn btn-danger" (click)="confirmCancellation()">Confirmar cancelación</button>
        </div>
    </div>
</div>